name: openclaw-stack

services:
  openclaw-gateway:
    container_name: openclaw-gateway
    build:
      context: .
      dockerfile: Dockerfile
      args:
        OPENCLAW_VERSION: ${OPENCLAW_VERSION:-2026.2.26}
    image: ${OPENCLAW_IMAGE_NAME:-openclaw:2026.2.26}
    restart: unless-stopped
    environment:
      OPENCLAW_HOME: /home/node/.openclaw
      OPENCLAW_GATEWAY_PORT: ${OPENCLAW_GATEWAY_PORT:-18789}
      OPENCLAW_VERSION: ${OPENCLAW_VERSION:-2026.2.26}
      OPENCLAW_CONTROLUI_ALLOWED_ORIGINS: ${OPENCLAW_CONTROLUI_ALLOWED_ORIGINS:-http://localhost:18789,http://127.0.0.1:18789}
      TMPDIR: /home/node/.openclaw/tmp
      TZ: ${TZ:-UTC}
    ports:
      - "${OPENCLAW_BIND_ADDRESS:-0.0.0.0}:${OPENCLAW_GATEWAY_PORT:-18789}:18789"
    volumes:
      - ./data/openclaw:/home/node/.openclaw
    healthcheck:
      test: ["CMD", "/usr/local/bin/healthcheck.sh"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 45s
    networks:
      - openclaw-net

networks:
  openclaw-net:
    name: ${OPENCLAW_NETWORK_NAME:-openclaw-net}
    external: ${OPENCLAW_NETWORK_EXTERNAL:-false}
